# 修复计划：图片上传静默失败问题

## 问题诊断
- **核心问题**：`wait_for_upload` 只检查 `imagePaths`（图片已生成），不检查 `uploadedImageUrls`（图片已上传）
- **导致后果**：`12_upload` 节点静默失败后，`14_html` 才发现 `uploadedImageUrls` 为空，错误信息不够友好

## 修复方案

### 1. 增强 `wait_for_upload` 节点验证
- 同时检查 `imagePaths` 和 `uploadedImageUrls` 两个状态
- 如果 `uploadedImageUrls` 为空，立即抛出清晰的中文错误
- 在 `14_html` 之前就暴露问题，而不是等到最后

### 2. 改进错误提示（`14_html` 和 `wait_for_upload`）
- 把技术化错误信息改成清晰的中文提示
- 提供可能的解决方案

### 3. 增强 `12_upload` 日志输出
- 在关键位置添加 `console.log`（不使用 defer），确保即使失败也能看到日志
- 在节点开始时输出明确的"开始上传"信息

## 具体修改
1. **`src/agents/article/nodes/13_wait_for_upload.node.ts`**：添加 `uploadedImageUrls` 验证
2. **`src/agents/article/nodes/14_html.node.ts`**：优化错误信息
3. **`src/agents/article/nodes/12_upload.node.ts`**：添加关键日志输出

## 预期效果
- 问题在 `wait_for_upload` 节点就被发现并抛出清晰的中文错误
- 用户能立即理解问题所在，而不是看到技术化的错误信息
- 即使 `12_upload` 静默失败，也能看到关键日志