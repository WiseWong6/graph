## éœ€æ±‚åˆ†æ

### é—®é¢˜1ï¼šå›¾ç‰‡æµç¨‹ï¼ˆ10/11/12ï¼‰æµå¼è¾“å‡ºå¹²æ‰°
- 09_humanizeï¼ˆèšç„¦èŠ‚ç‚¹ï¼‰æ‰§è¡Œæ—¶ï¼Œ10_prompts/11_images/12_upload å¹¶è¡Œæ‰§è¡Œ
- 10_prompts å·²ä½¿ç”¨ `outputCoordinator.defer()` ç¼“å†²è¾“å‡º âœ…
- 11_images å’Œ 12_upload ä»ä½¿ç”¨ç›´æ¥ `console.log`ï¼Œå¯¼è‡´è¾“å‡ºæ··ä¹± âŒ
- **ç›®æ ‡**ï¼šæ‰€æœ‰å›¾ç‰‡ç›¸å…³èŠ‚ç‚¹çš„æ—¥å¿—éƒ½ç­‰å¾… 09_humanize å®Œæˆåç»Ÿä¸€è¾“å‡º

### é—®é¢˜2ï¼šé‡è¯•ä½“éªŒä¸ç»Ÿä¸€
- å½“å‰ `handleNodeError` çš„ "n=ä»æŸèŠ‚ç‚¹é‡æ–°è¿è¡Œ" ä½¿ç”¨ readline ç®€å•è¾“å…¥
- ResumeManager ä½¿ç”¨ inquirer æä¾›æ›´å¥½çš„äº¤äº’å¼é€‰æ‹©ä½“éªŒ
- **ç›®æ ‡**ï¼šç»Ÿä¸€ä½¿ç”¨ inquirerï¼Œä¸ `--resume` ä½“éªŒä¸€è‡´

---

## å®æ–½æ–¹æ¡ˆ

### ä»»åŠ¡1ï¼š11_images èŠ‚ç‚¹è¾“å‡ºç¼“å†²
**æ–‡ä»¶**: `src/agents/article/nodes/11_images.node.ts`

**ä¿®æ”¹å†…å®¹**ï¼š
1. å¯¼å…¥ `outputCoordinator`
2. å°†æ‰€æœ‰ `console.log("[10_images] ...")` æ›¿æ¢ä¸º `outputCoordinator.defer(() => console.log(...))`

**å…·ä½“ä¿®æ”¹**ï¼ˆçº¦12å¤„ï¼‰ï¼š
```typescript
// åŸä»£ç ï¼š
console.log("[10_images] Processing results:", results.length);

// ä¿®æ”¹ä¸ºï¼š
outputCoordinator.defer(() => {
  console.log("[10_images] Processing results:", results.length);
});
```

### ä»»åŠ¡2ï¼š12_upload èŠ‚ç‚¹è¾“å‡ºç¼“å†²
**æ–‡ä»¶**: `src/agents/article/nodes/12_upload.node.ts`

**ä¿®æ”¹å†…å®¹**ï¼š
1. å¯¼å…¥ `outputCoordinator`
2. å°†æ‰€æœ‰ `console.log("[11.5_upload] ...")` æ›¿æ¢ä¸º `outputCoordinator.defer(() => console.log(...))`

**å…·ä½“ä¿®æ”¹**ï¼ˆçº¦16å¤„ï¼‰ï¼š
```typescript
// åŸä»£ç ï¼š
console.log("[11.5_upload] ========== NODE STARTED ==========");

// ä¿®æ”¹ä¸ºï¼š
outputCoordinator.defer(() => {
  console.log("[11.5_upload] ========== NODE STARTED ==========");
});
```

### ä»»åŠ¡3ï¼šä¼˜åŒ–é‡è¯•ä½“éªŒä½¿ç”¨ inquirer
**æ–‡ä»¶**: `src/cli/step-cli.ts`

**ä¿®æ”¹å†…å®¹**ï¼š
1. å¯¼å…¥ `inquirer`ï¼ˆå·²å­˜åœ¨ï¼‰
2. æ›¿æ¢ `handleNodeError` ä¸­çš„èŠ‚ç‚¹é€‰æ‹©é€»è¾‘ï¼ˆç¬¬358-416è¡Œï¼‰
3. ä½¿ç”¨ inquirer çš„ list ç±»å‹æ›¿ä»£ readline

**å…·ä½“å˜æ›´**ï¼š
```typescript
// åŸä»£ç ï¼ˆç¬¬358-385è¡Œï¼‰ï¼š
if (answer === "n") {
  console.log(chalk.cyan("\nğŸ“‹ å¯ç”¨èŠ‚ç‚¹åˆ—è¡¨:\n"));
  const nodeEntries = Object.entries(NODE_INFO);
  nodeEntries.forEach(([key, info], index) => { ... });
  const nodeAnswer = await new Promise<string>((resolve) => {
    const rl2 = readline.createInterface({ ... });
    rl2.question(chalk.yellow("\nè¾“å…¥èŠ‚ç‚¹ç¼–å·æˆ–æŒ‰ Enter å–æ¶ˆ: "), ...);
  });
  ...
}

// ä¿®æ”¹ä¸ºï¼š
if (answer === "n") {
  const nodeEntries = Object.entries(NODE_INFO);
  const choices = nodeEntries.map(([key, info], index) => {
    const status = timingSummaries.some(s => s.nodeName === key)
      ? chalk.green("âœ“")
      : chalk.gray("â—‹");
    return {
      name: `${status} ${info.name} - ${info.description}`,
      value: key
    };
  });

  const { selectedNode } = await inquirer.prompt([{
    type: 'list',
    name: 'selectedNode',
    message: 'é€‰æ‹©è¦é‡æ–°è¿è¡Œçš„èŠ‚ç‚¹:',
    choices: choices,
    pageSize: 15,
  }]);

  if (selectedNode) {
    // ä½¿ç”¨ ResumeManager æ¢å¤é€»è¾‘...
  }
}
```

### ä»»åŠ¡4ï¼šä¼˜åŒ–é‡è¯•æ‰§è¡Œé€»è¾‘
**æ–‡ä»¶**: `src/cli/step-cli.ts`

**æ”¹è¿›ç‚¹**ï¼š
- å½“å‰é‡è¯•é€»è¾‘åˆ›å»ºæ–° thread å¹¶ä»å¤´è¿è¡Œ
- æ”¹ä¸ºä½¿ç”¨ ResumeManager çš„ `resume()` æ–¹æ³•
- æ”¯æŒä»æŒ‡å®š checkpoint æ¢å¤

---

## å®æ–½æ­¥éª¤

1. **11_images èŠ‚ç‚¹**ï¼šæ·»åŠ  `outputCoordinator.defer()` ç¼“å†²æ‰€æœ‰æ—¥å¿—
2. **12_upload èŠ‚ç‚¹**ï¼šæ·»åŠ  `outputCoordinator.defer()` ç¼“å†²æ‰€æœ‰æ—¥å¿—  
3. **handleNodeError**ï¼šä½¿ç”¨ inquirer æ›¿ä»£ readline é€‰æ‹©èŠ‚ç‚¹
4. **æµ‹è¯•éªŒè¯**ï¼šè¿è¡Œå®Œæ•´æµç¨‹ï¼Œç¡®è®¤è¾“å‡ºé¡ºåºæ­£ç¡®